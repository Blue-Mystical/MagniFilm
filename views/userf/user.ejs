<%- include('../partials/header.ejs') %>

<div class="container py-4 mt-4 bg-secondary rounded-3">
    <div class="form-group mb-3 bg-primary border border-secondary rounded-3">
        <h1 class="display-5 fw-bold text-center py-1">Welcome, <%= user.username %></h1>

        <div class="row">
            <div class="col-lg-6 px-0 mt-3 mb-5 mb-lg-3">
                <h3 class="display-6 fw-bold text-center py-1">
                    <% if(typeof user.joineddate !== 'undefined') { %>Join date: <%= helper.getLongDate(user.joineddate) %> <% } %>
                </h3>
                <hr class='dark-short mb-4'>
                <a class="btn btn-light btn-lg btn-outline-secondary d-flex justify-content-center mx-5 mb-2" href='/user/history'>History</a>
                <a class="btn btn-light btn-lg btn-outline-secondary d-flex justify-content-center mx-5 mb-2" href='/user/liked'>Liked Movies</a>
                <a class="btn btn-light btn-lg btn-outline-secondary d-flex justify-content-center mx-5 mb-4" href='/user/reviews'>Your Reviews</a>
                <% if (helper.canManage(currentUser)) { %>
                    <hr class='dark-short mb-4'>
                    <div class="dropdown d-flex flex-column">
                        <button class="btn btn-warning btn-outline-secondary mx-5 dropdown-toggle" role="button" id="adminOptions" data-bs-toggle="dropdown" aria-expanded="false">
                          Manager options
                        </button>

                        <ul class="dropdown-menu w-100" aria-labelledby="adminOptions">
                          <li><a class="dropdown-item" href="/movies/add">Add new movie</a></li>
                          <li><a class="dropdown-item" href="/theatres/add">Add new theatre</a></li>
                          <li><a class="dropdown-item" href="/theatres/logo/add">Add theatre logo</a></li>
                          <li><a class="dropdown-item" href="/news/add">Add news</a></li>
                          <li><a class="dropdown-item" href="/user/manage">Manage users</a></li>
                        </ul>
                    </div>
                    
                <% } %> 
            </div>
            <div class="col-lg-6 px-0 mt-3 mb-5 mb-lg-3 bg-se"> 
                <div class='d-flex justify-content-center'>
                    <% if (currentUser.avatar !== undefined) { %>
                        <img class='large-avatar' src="<%= currentUser.avatar %>" alt="AAAAAAAA" height="300px">
                    <% } else { %> 
                        <img class='large-avatar' src="/assets/unknownavatar.png" alt="AAAAAAAA" height="300px">
                    <% } %> 
                </div>
                <div class='d-flex justify-content-center'>
                    <form action='/user/avatar?_method=PUT' method="POST" enctype="multipart/form-data" class="text-black">
                        <div class="form-group my-3">
                            <label class="form-label">Upload Avatar</label>
                            <input type="file" class="form-control" name="image" accept="image/*">
                        </div>
                        <button type="submit" class="btn btn-light">Submit</button>
                    </form>
                </div>
            </div>  
            
        </div>
        
        <div class='text-center d-flex flex-row justify-content-center'>    

        </div>
        
    </div>
</div>

<%- include('../partials/footer.ejs') %>

